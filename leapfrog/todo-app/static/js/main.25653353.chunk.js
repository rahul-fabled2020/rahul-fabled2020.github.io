(this["webpackJsonpto-do-v2"]=this["webpackJsonpto-do-v2"]||[]).push([[0],{28:function(e,t,a){e.exports=a(39)},37:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(15),c=a.n(o),i=a(2),s=(a(37),a(12)),l=a(3),u=function(e){return{type:"STORE_TOKEN",payload:e}},m=function(e){return{type:"STORE_USER",payload:e}},d={user:{},token:""};var p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"STORE_TOKEN":return Object(l.a)({},e,{token:t.payload});case"STORE_USER":return Object(l.a)({},e,{user:t.payload});default:return e}},f=a(23),h="SHOW_ALL",b="SHOW_COMPLETED",E="SHOW_ACTIVE",v={list:[],visibility:h};var _=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TODO":return Object(l.a)({},e,{list:[].concat(Object(f.a)(e.list),[{id:t.payload.id,title:t.payload.title,description:t.payload.description,isCompleted:!1}])});case"EDIT_TODO":return Object(l.a)({},e,{list:e.list.map((function(e){return e.id===t.payload.id?t.payload:e}))});case"DELETE_TODO":return Object(l.a)({},e,{list:e.list.filter((function(e){return e.id!==t.payload}))});case"STORE_TODOS":return Object(l.a)({},e,{list:Object(f.a)(t.payload)});case"TOGGLE_TODO":return Object(l.a)({},e,{list:e.list.map((function(e){return e.id===t.payload?Object(l.a)({},e,{isCompleted:!e.isCompleted}):e}))});case"SET_VISIBILITY_FILTER":return Object(l.a)({},e,{visibility:t.payload});default:return e}},g=Object(s.b)({api:p,todos:_}),O=Object(s.c)(g),y=a(10),N=a(1),T=a(5),k=a(6),j=a(7),C=a(8),S="https://todosapi1.herokuapp.com/api";var w={get:function(e,t){return fetch("".concat(S).concat(e),{headers:{authorization:t}}).then((function(e){return e.json()})).catch((function(e){return e}))},post:function(e,t,a){return fetch("".concat(S).concat(e),{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:a},body:JSON.stringify(t)}).then((function(e){return e.json()})).catch((function(e){return e}))},put:function(e,t,a){return fetch("".concat(S).concat(e),{method:"PUT",cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:a},body:JSON.stringify(t)}).then((function(e){return e.json()})).catch((function(e){return e}))},destroy:function(e,t){return fetch("".concat(S).concat(e),{method:"DELETE",cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:t}}).then((function(e){return e.json()})).catch((function(e){return e}))}},D=function(e){Object(C.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(T.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onClick=function(){var t=e.props,a=t.label;(0,t.onClick)(a)},e}return Object(k.a)(a,[{key:"render",value:function(){var e=this.onClick,t=this.props,a=t.activeTab,n=t.label,o="tabs__list-item";return a===n&&(o+=" tabs__list--active"),r.a.createElement("li",{className:o,onClick:e},n)}}]),a}(r.a.Component),A=function(e){Object(C.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(T.a)(this,a),(n=t.call(this,e)).onClickTabItem=function(e){var t="Active"===e?E:"Completed"===e?b:h;n.props.onClick(t),n.setState((function(){return{activeTab:e}}))},n.state={activeTab:n.props.children[0].props.label},n}return Object(k.a)(a,[{key:"render",value:function(){var e=this.onClickTabItem,t=this.props.children,a=this.state.activeTab;return r.a.createElement("div",{className:"tabs"},r.a.createElement("ul",{className:"tabs__list"},t.map((function(t){var n=t.props.label;return r.a.createElement(D,{activeTab:a,key:n,label:n,onClick:e})}))),r.a.createElement("div",{className:"tabs__content"},t.map((function(e){if(e.props.label===a)return e.props.children}))))}}]),a}(r.a.Component),F=Object(i.b)((function(e){return{filter:e.todos.visibility}}),(function(e){return{onClick:function(t){return e(function(e){return{type:"SET_VISIBILITY_FILTER",payload:e}}(t))}}}))(A);var I={setCookie:function(e,t,a){var n=new Date;n.setTime(n.getTime()+24*a*60*60*1e3);var r="expires="+n.toUTCString();document.cookie=e+"="+t+";"+r+";path=/"},getCookie:function(e){for(var t=e+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){for(var r=a[n];" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return""}},L=function(e){w.put("/todos/".concat(e.id),{title:e.title,description:e.description,iscompleted:"".concat(!e.isCompleted)},I.getCookie("token")).then((function(t){t.data&&e.onClick()}))},x=function(e){w.destroy("/todos/".concat(e.id),I.getCookie("token")).then((function(t){t.error||e.deleteTodo(e.id)})).catch((function(e){return e}))},U=Object(i.b)((function(e){return{}}),(function(e){return{deleteTodo:function(t){return e(function(e){return{type:"DELETE_TODO",payload:e}}(t))}}}))((function(e){return r.a.createElement("li",{className:"todo__item"},e.title&&r.a.createElement("div",{className:"card"},r.a.createElement("h1",{onClick:function(t){return L(e)},className:"card__heading".concat(e.isCompleted?" line-through":"")},e.title),r.a.createElement("div",{onClick:function(t){return L(e)},className:"card__body".concat(e.isCompleted?" line-through":"")},e.description),r.a.createElement("div",{className:"card__footer"},r.a.createElement("div",{className:"card__buttons"},r.a.createElement("button",{className:"btn btn--secondary",onClick:function(t){return window.confirm("Are you sure to delete ".concat(e.title,"?"))&&x(e)}},"Delete"),r.a.createElement(y.b,{to:{pathname:"/edit",state:{id:e.id,title:e.title,description:e.description,isCompleted:e.isCompleted}},className:"btn btn--primary"},"Edit")))))})),R=function(e){return r.a.createElement("div",{className:"container"},r.a.createElement(y.b,{to:"/add",className:"btn btn--primary"},"Add Todo"),0===e.todos.length&&r.a.createElement("div",{className:"todo__empty-message"},"You don't have any tasks yet. Create a new one."),r.a.createElement("ul",{className:"todo"},e.todos.map((function(t){return r.a.createElement(U,Object.assign({key:t.id},t,{onClick:function(){return e.toggleTodo(t.id)}}))}))))},q=function(e,t){switch(t){case h:return e;case b:return e.filter((function(e){return e.isCompleted}));case E:return e.filter((function(e){return!e.isCompleted}));default:throw new Error("Unknown filter: "+t)}},P=Object(i.b)((function(e){return{todos:q(e.todos.list,e.todos.visibility)}}),(function(e){return{toggleTodo:function(t){return e(function(e){return{type:"TOGGLE_TODO",payload:e}}(t))}}}))(R);var J=Object(i.b)((function(e){return Object(l.a)({},e)}))((function(e){return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"header__heading"},r.a.createElement(y.b,{to:"/",className:"header__link"},"To do App")),e.api.token&&r.a.createElement("div",{className:"header__user-wrapper"},r.a.createElement("button",{className:"btn btn--secondary header__btn",onClick:function(t){return function(e){I.setCookie("token","",0),e.history.push("/login")}(e)}},"Log Out"),r.a.createElement("div",{className:"header__user-info"},e.api.user.firstname+" "+e.api.user.lastname))))})),V=function(e){Object(C.a)(a,e);var t=Object(j.a)(a);function a(){return Object(T.a)(this,a),t.apply(this,arguments)}return Object(k.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=I.getCookie("token");if(t){var a=JSON.parse(I.getCookie("user"));this.props.storeToken(t),this.props.storeUser(a)}else this.props.history.push("/login");t&&w.get("/todos",t).then((function(t){t.data?e.props.storeTodos(t.data):500===t.error.code&&e.props.storeTodos([])})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e="All",t="Active",a="Completed";return r.a.createElement("div",null,r.a.createElement(J,this.props),r.a.createElement(F,null,r.a.createElement("div",{label:e},r.a.createElement(P,null)),r.a.createElement("div",{label:t},r.a.createElement(P,null)),r.a.createElement("div",{label:a},r.a.createElement(P,null))))}}]),a}(n.Component);var W=Object(i.b)((function(e){return{token:e.api.token}}),(function(e){return{storeTodos:function(t){return e(function(e){return{type:"STORE_TODOS",payload:e}}(t))},storeToken:function(t){return e(u(t))},storeUser:function(t){return e(m(t))}}}))(V);var z=function(e){return e.message?r.a.createElement("div",{className:"error"},"Error: ",e.message):null},B=function(e){Object(C.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(T.a)(this,a),(n=t.call(this,e)).onSubmit=function(e){e.preventDefault();var t={title:e.target.title.value.trim(),description:e.target.description.value.trim(),iscompleted:"".concat(n.props.location.state.isCompleted)};e.target.title.value="",e.target.description.value="",w.put("/todos/".concat(n.props.location.state.id),t,n.props.token).then((function(e){e.data?(n.props.editTodo(e.data),n.props.history.push("/")):(console.log(e.error),n.setState((function(){return{error:e.error.message}})))})).catch((function(e){return n.setState((function(){return{error:e.message}}))}))},n.state={error:void 0},n}return Object(k.a)(a,[{key:"render",value:function(){var e=this.props.location.state,t=e.title,a=e.description;return r.a.createElement(n.Fragment,null,r.a.createElement(J,this.props),this.state.error&&r.a.createElement(z,{message:this.state.error}),r.a.createElement("form",{onSubmit:this.onSubmit,className:"form todo__form"},r.a.createElement("h1",{className:"todo__heading"},"Edit Todo"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{type:"text",name:"title",className:"form__input",defaultValue:t,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement("textarea",{name:"description",className:"form__textarea",defaultValue:a,required:!0})),r.a.createElement("button",{className:"btn btn--primary form__btn"},"Edit")))}}]),a}(r.a.Component),G=Object(i.b)((function(e){return{token:e.api.token}}),(function(e){return{editTodo:function(t){return e(function(e){return{type:"EDIT_TODO",payload:e}}(t))}}}))(B),H=function(e){Object(C.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(T.a)(this,a),(n=t.call(this,e)).onSubmit=function(e){e.preventDefault();var t={title:e.target.title.value.trim(),description:e.target.description.value.trim(),iscompleted:"false"};e.target.title.value="",e.target.description.value="",w.post("/todos",t,n.props.token).then((function(e){e.data?(console.log(e.data),n.props.addTodo(e.data),n.props.history.push("/")):(console.log(e.error),n.setState((function(){return{error:e.error.message}})))})).catch((function(e){return n.setState((function(){return{error:e.message}}))}))},n.state={error:void 0},n}return Object(k.a)(a,[{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement(J,this.props),this.state.error&&r.a.createElement(z,{message:this.state.error}),r.a.createElement("form",{onSubmit:this.onSubmit,className:"form todo__form"},r.a.createElement("h1",{className:"todo__heading"},"Add Todo"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{type:"text",name:"title",className:"form__input",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement("textarea",{name:"description",className:"form__textarea",required:!0})),r.a.createElement("button",{className:"btn btn--primary form__btn"},"Add")))}}]),a}(r.a.Component),M=Object(i.b)((function(e){return{token:e.api.token}}),(function(e){return{addTodo:function(t){return e(function(e){return{type:"ADD_TODO",payload:e}}(t))}}}))(H),Y=a(27);var K=Object(i.b)((function(e){return Object(l.a)({},e)}),(function(e){return{storeToken:function(t){return e(u(t))},storeUser:function(t){return e(m(t))}}}))((function(e){var t=Object(n.useState)(void 0),a=Object(Y.a)(t,2),o=a[0],c=a[1];return r.a.createElement("div",null,o&&r.a.createElement(z,{message:o}),r.a.createElement("form",{action:"#",className:"form login__form",onSubmit:function(t){return function(e,t,a){e.preventDefault();var n=e.target.username.value,r=e.target.password.value;e.target.username.value="",e.target.password.value="",w.post("/auth/login",{username:n,password:r}).then((function(e){if(e.data){t.storeToken(e.data.token),t.storeUser(e.data.user);I.setCookie("user",JSON.stringify(e.data.user),1),I.setCookie("token",e.data.token,1),t.history.push("/")}else a(e.error.message)})).catch((function(e){return console.log(e)}))}(t,e,c)}},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"form__group"},r.a.createElement("label",{htmlFor:"username",className:"form__label"},"Username"),r.a.createElement("input",{type:"text",className:"form__input",name:"username",placeholder:"Enter Username",required:!0})),r.a.createElement("div",{className:"form__group"},r.a.createElement("label",{htmlFor:"password",className:"form__label"},"Password"),r.a.createElement("input",{type:"password",className:"form__input",name:"password",placeholder:"Enter Password",required:!0})),r.a.createElement("div",{className:"form__group"},r.a.createElement("button",{type:"submit",className:"btn btn-primary form__btn"},"Login"))),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"form__footer"},"Don't have an account? ",r.a.createElement(y.b,{to:"/register"},"Register")))))})),$=function(e){Object(C.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(T.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={error:void 0},e.onSubmit=function(t){t.preventDefault();var a=t.target.firstname.value,n=t.target.lastname.value,r=t.target.username.value,o=t.target.password.value,c=t.target.email.value;w.post("/auth/register",{firstname:a,lastname:n,email:c,username:r,password:o}).then((function(t){t.data?e.props.history.push("/login"):e.setState((function(){return{error:t.error.message}}))})).catch((function(t){return e.setState((function(){return{error:t.message}}))}))},e}return Object(k.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,this.state.error&&r.a.createElement(z,{message:this.state.error}),r.a.createElement("form",{action:"#",className:"form login__form",onSubmit:this.onSubmit},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"form__group"},r.a.createElement("label",{htmlFor:"firstname",className:"form__label"},"First Name"),r.a.createElement("input",{type:"text",className:"form__input",name:"firstname",placeholder:"Enter First Name",required:!0})),r.a.createElement("div",{className:"form__group"},r.a.createElement("label",{htmlFor:"lastname",className:"form__label"},"Last Name"),r.a.createElement("input",{type:"text",className:"form__input",name:"lastname",placeholder:"Enter Last Name",required:!0})),r.a.createElement("div",{className:"form__group"},r.a.createElement("label",{htmlFor:"username",className:"form__label"},"Username"),r.a.createElement("input",{type:"text",className:"form__input",name:"username",placeholder:"Enter Username",required:!0})),r.a.createElement("div",{className:"form__group"},r.a.createElement("label",{htmlFor:"password",className:"form__label"},"Password"),r.a.createElement("input",{type:"password",className:"form__input",name:"password",placeholder:"Enter Password",required:!0})),r.a.createElement("div",{className:"form__group"},r.a.createElement("label",{htmlFor:"email",className:"form__label"},"Email"),r.a.createElement("input",{type:"email",className:"form__input",name:"email",placeholder:"Enter Email",required:!0})),r.a.createElement("div",{className:"form__group"},r.a.createElement("button",{type:"submit",className:"btn btn-primary form__btn"},"Register")))))}}]),a}(n.Component),Q=function(){return r.a.createElement("div",null,"404 Not Found")},X=function(){return r.a.createElement(y.a,{basename:"/"},r.a.createElement("div",null,r.a.createElement(N.c,null,r.a.createElement(N.a,{path:"/",component:W,exact:!0}),r.a.createElement(N.a,{path:"/login",component:K}),r.a.createElement(N.a,{path:"/register",component:$}),r.a.createElement(N.a,{path:"/add",component:M}),r.a.createElement(N.a,{path:"/edit",component:G}),r.a.createElement(N.a,{component:Q}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,{store:O},r.a.createElement(X,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[28,1,2]]]);
//# sourceMappingURL=main.25653353.chunk.js.map