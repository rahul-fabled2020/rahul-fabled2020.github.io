(this["webpackJsonpto-do-v2"]=this["webpackJsonpto-do-v2"]||[]).push([[0],{101:function(e,t,a){e.exports=a.p+"static/media/user.6871ca60.svg"},105:function(e,t,a){e.exports=a(176)},115:function(e,t,a){},116:function(e,t,a){},176:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(20),s=a.n(c),o=a(21),l=(a(114),a(115),a(116),a(43)),i=a(25),u=a(15),m={users:[],projects:[],tasks:[],comments:[]};var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"STORE_USERS":return Object(u.a)({},e,{users:t.payload});case"ADD_USER":return Object(u.a)({},e,{users:[t.payload].concat(Object(i.a)(e.users))});case"STORE_PROJECTS":return Object(u.a)({},e,{projects:t.payload});case"ADD_PROJECT":return Object(u.a)({},e,{projects:[t.payload].concat(Object(i.a)(e.projects))});case"STORE_TASKS":return Object(u.a)({},e,{tasks:t.payload});case"ADD_TASK":return Object(u.a)({},e,{tasks:[t.payload].concat(Object(i.a)(e.tasks))});case"STORE_COMMENTS":return Object(u.a)({},e,{comments:t.payload});case"ADD_COMMENT":return Object(u.a)({},e,{comments:[t.payload].concat(Object(i.a)(e.comments))});default:return e}},p={list:[],visibility:"SHOW_ALL"};var E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TODO":return Object(u.a)({},e,{list:[].concat(Object(i.a)(e.list),[{id:t.payload.id,title:t.payload.title,description:t.payload.description,isCompleted:!1}])});case"EDIT_TODO":return Object(u.a)({},e,{list:e.list.map((function(e){return e.id===t.payload.id?t.payload:e}))});case"DELETE_TODO":return Object(u.a)({},e,{list:e.list.filter((function(e){return e.id!==t.payload}))});case"STORE_TODOS":return Object(u.a)({},e,{list:Object(i.a)(t.payload)});case"TOGGLE_TODO":return Object(u.a)({},e,{list:e.list.map((function(e){return e.id===t.payload?Object(u.a)({},e,{isCompleted:!e.isCompleted}):e}))});case"SET_VISIBILITY_FILTER":return Object(u.a)({},e,{visibility:t.payload});default:return e}},f=Object(l.b)({api:d,todos:E}),h=Object(l.c)(f),b=a(8),v=a(14),g=a(10),j=a(11),y=a(12),k=a(13),N="https://project-ms.herokuapp.com/api";var C={get:function(e,t){return fetch("".concat(N).concat(e),{headers:{authorization:t}}).then((function(e){return e.json()}))},post:function(e,t,a){return fetch("".concat(N).concat(e),{method:"POST",headers:{"Content-Type":"application/json",Authorization:a},body:JSON.stringify(t)}).then((function(e){return 204===e.status||204===e.code?{}:e.json()}))},put:function(e,t,a){return fetch("".concat(N).concat(e),{method:"PUT",cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:a},body:JSON.stringify(t)}).then((function(e){return e.json()}))},destroy:function(e,t){return fetch("".concat(N).concat(e),{method:"DELETE",cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:t}}).then((function(e){return 204===e.status||204===e.code?{}:e.json()}))}};var S={setCookie:function(e,t,a){var r=new Date;r.setTime(r.getTime()+24*a*60*60*1e3);var n="expires="+r.toUTCString();document.cookie=e+"="+t+";"+n+";path=/"},getCookie:function(e){for(var t=e+"=",a=document.cookie.split(";"),r=0;r<a.length;r++){for(var n=a[r];" "===n.charAt(0);)n=n.substring(1);if(0===n.indexOf(t))return n.substring(t.length,n.length)}return""}};var O=function(e){return function(t){Object(k.a)(r,t);var a=Object(y.a)(r);function r(){return Object(g.a)(this,r),a.apply(this,arguments)}return Object(j.a)(r,[{key:"render",value:function(){var t=S.getCookie("token");return t||this.props.history.push("/login"),t&&n.a.createElement(e,this.props)}}]),r}(r.Component)};var _=function(e){return e.message?n.a.createElement("div",{className:"error"},"Error: ",e.message):null},w=function(e){var t="";return e.message&&(t=e.message),e.details&&(t=e.details.map((function(e){return e.message})).join(", ")),t},I=function(e){Object(k.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(g.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={totalCounts:{usersCount:0,projectsCount:0,tasksCount:0},error:""},e}return Object(j.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=S.getCookie("token");C.get("/stats",t).then((function(t){return e.setState((function(){return{totalCounts:t.data}}))})).catch((function(t){return e.setState((function(){return{error:w(t)}}))}))}},{key:"render",value:function(){return n.a.createElement("div",{className:"app"},n.a.createElement(_,{message:this.state.error}),n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-4"},n.a.createElement("div",{className:"card-counter primary"},n.a.createElement("i",{className:"fas fa-project-diagram"}),n.a.createElement("span",{className:"count-numbers"},this.state.totalCounts.projectsCount),n.a.createElement("span",{className:"count-name"},"Projects"))),n.a.createElement("div",{className:"col-md-4"},n.a.createElement("div",{className:"card-counter danger"},n.a.createElement("i",{className:"fas fa-tasks"}),n.a.createElement("span",{className:"count-numbers"},this.state.totalCounts.tasksCount),n.a.createElement("span",{className:"count-name"},"Tasks"))),n.a.createElement("div",{className:"col-md-4"},n.a.createElement("div",{className:"card-counter info"},n.a.createElement("i",{className:"fa fa-users"}),n.a.createElement("span",{className:"count-numbers"},this.state.totalCounts.usersCount),n.a.createElement("span",{className:"count-name"},"Users"))))))}}]),a}(r.Component);var D=Object(o.b)((function(e){return{}}),(function(e){return{}}))(O(I)),T=a(38),x=a(182);var M=function(e){var t=Object(r.useState)(void 0),a=Object(T.a)(t,2),c=a[0],s=a[1],o=Object(r.useState)(!1),l=Object(T.a)(o,2),i=l[0],u=l[1];return n.a.createElement("div",{className:"login"},c&&n.a.createElement(_,{message:c}),i&&n.a.createElement(x.a,{variant:"info",className:"text-center"},"Logging In..."),n.a.createElement("form",{action:"#",className:"form login__form",onSubmit:function(t){return function(e,t,a,r){e.preventDefault(),r(!0);var n=e.target.email.value,c=e.target.password.value;e.target.email.value="",e.target.password.value="",C.post("/auth/login",{email:n,password:c}).then((function(e){if(e.data){S.setCookie("user",JSON.stringify(e.data.user),1),S.setCookie("token",e.data.token,1),t.history.push("/")}else r(!1),a(w(e.error))})).catch((function(e){return r(!1)||a(w(e))}))}(t,e,s,u)}},n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"form__group"},n.a.createElement("label",{htmlFor:"email",className:"form__label"},"Email"),n.a.createElement("input",{type:"email",className:"form__input",name:"email",placeholder:"Enter email",required:!0})),n.a.createElement("div",{className:"form__group"},n.a.createElement("label",{htmlFor:"password",className:"form__label"},"Password"),n.a.createElement("input",{type:"password",className:"form__input",name:"password",placeholder:"Enter Password",required:!0})),n.a.createElement("div",{className:"form__group"},n.a.createElement("button",{type:"submit",className:"button button--primary form__btn"},"Login"))),n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"form__footer"},"Don't have an account? ",n.a.createElement("a",{href:"mailto: rahul.fabled@gmail.com"},"Contact Admin")))))},A=Object(v.f)((function(e){return n.a.createElement("div",{className:"sidebar",style:e.visible?{width:"250px"}:{width:"0"}},n.a.createElement("h1",{className:"sidebar__heading"},"PMS-Dashboard"),n.a.createElement(b.c,{to:"/",activeClassName:"active",exact:!0},"Home"),n.a.createElement(b.c,{to:"/users",activeClassName:"active"},"Users"),n.a.createElement(b.c,{to:"/projects",activeClassName:"active"},"Projects"))}));var B=Object(o.b)((function(e){return Object(u.a)({},e)}))(Object(v.f)((function(e){var t;try{t=JSON.parse(S.getCookie("user"))}catch(r){t={}}var a=S.getCookie("token");return n.a.createElement("div",{className:"header"},n.a.createElement("div",{className:"container"},n.a.createElement("h1",{className:"header__heading"},n.a.createElement(b.b,{to:"/",className:"header__link"},"Project Management System")),a&&n.a.createElement("div",{className:"header__user-wrapper"},n.a.createElement("button",{className:"button button--secondary header__button",onClick:function(t){return function(e){S.setCookie("token","",0),e.history.push("/login")}(e)}},"Log Out"),n.a.createElement("div",{className:"header__user-info"},n.a.createElement("div",{className:"header__user-name"},t.firstname+" "+t.lastname),n.a.createElement("div",{className:"header__user-role"},t.roles&&t.roles[0].title)))))}))),U=Object(v.f)((function(e){var t=Object(r.useState)(!0),a=Object(T.a)(t,2),c=a[0],s=a[1];return n.a.createElement("div",{className:"dashboard"},n.a.createElement(A,{visible:c,setVisible:s}),n.a.createElement("div",{className:"dashboard__content"},n.a.createElement(B,null),e.children))}));var L=function(e){return function(t){Object(k.a)(r,t);var a=Object(y.a)(r);function r(){return Object(g.a)(this,r),a.apply(this,arguments)}return Object(j.a)(r,[{key:"render",value:function(){return n.a.createElement(U,null,n.a.createElement(e,this.props))}}]),r}(r.Component)},P=a(184),H=a(185),V=a(186),R=a(100),G=a(183),q=function(e){Object(k.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(g.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={roles:[],error:""},e.validatePassword=function(e,t){var a="";return e!==t&&(a="The passwords do not match.",document.getElementById("password").focus()),e.length<8&&(a="The passwords should of at least 8 characters.",document.getElementById("password").focus()),a},e.registerUser=function(t){t.preventDefault();var a,r=S.getCookie("token"),n=t.target,c=document.getElementById("firstname").value,s=document.getElementById("lastname").value,o=document.getElementById("email").value,l=document.getElementById("password").value,i=document.getElementById("confirmPassword").value,m=document.getElementById("role"),d=parseInt(m.value),p=m.options.item(m.selectedIndex).text;(a=e.validatePassword(l,i))?e.setState((function(){return{error:a}})):C.post("/users",{firstname:c,lastname:s,email:o,password:l},r).then((function(t){var a=t.data;if(t.error){var c=w(t.error);e.setState((function(){return{error:c}}))}else e.props.addUser(Object(u.a)({},a,{role:p})),C.post("/users/".concat(a.id,"/roles"),{roleIds:[d]},r).then((function(t){t.error||(n.reset(),e.props.onHide()),t.error&&e.setState((function(){return{error:w(t.error)}}))})).catch((function(t){e.setState((function(){return{error:w(t)}}))}))})).catch((function(t){return e.setState((function(){return{error:w(t)}}))}))},e}return Object(j.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=S.getCookie("token");C.get("/roles",t).then((function(t){t.data&&(t.data.sort((function(e,t){return e.title<=t.title?-1:1})),e.setState((function(){return{roles:t.data,error:""}}))),t.error&&e.setState((function(){return{error:w(t.error)}}))})).catch((function(t){return e.setState((function(){return{error:w(t)}}))}))}},{key:"render",value:function(){return n.a.createElement(H.a,Object.assign({},this.props,{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0}),n.a.createElement(H.a.Header,{closeButton:!0},n.a.createElement(H.a.Title,{id:"contained-modal-title-vcenter"},"Add User")),n.a.createElement(H.a.Body,null,n.a.createElement(_,{message:this.state.error}),n.a.createElement(V.a,{onSubmit:this.registerUser},n.a.createElement(V.a.Row,null,n.a.createElement(V.a.Group,{as:R.a,controlId:"firstname"},n.a.createElement(V.a.Label,null,"First Name"),n.a.createElement(V.a.Control,{required:!0,type:"text",placeholder:"Enter your First Name"})),n.a.createElement(V.a.Group,{as:R.a,controlId:"lastname"},n.a.createElement(V.a.Label,null,"Last Name"),n.a.createElement(V.a.Control,{required:!0,type:"text",placeholder:"Enter your Last Name"}))),n.a.createElement(V.a.Group,{controlId:"email"},n.a.createElement(V.a.Label,null,"Email address"),n.a.createElement(V.a.Control,{required:!0,type:"email",placeholder:"name@example.com"})),n.a.createElement(V.a.Row,null,n.a.createElement(V.a.Group,{as:R.a,controlId:"password"},n.a.createElement(V.a.Label,null,"Password"),n.a.createElement(V.a.Control,{required:!0,type:"password",placeholder:"Enter your password"})),n.a.createElement(V.a.Group,{as:R.a,controlId:"confirmPassword"},n.a.createElement(V.a.Label,null,"Confirm Password"),n.a.createElement(V.a.Control,{required:!0,type:"password",placeholder:"Enter your confirmPassword"}))),n.a.createElement(V.a.Group,{as:R.a,controlId:"role"},n.a.createElement(V.a.Label,null,"Role"),n.a.createElement(V.a.Control,{required:!0,as:"select",defaultValue:""},n.a.createElement("option",{disabled:!0,value:""},"--Select Role--"),this.state.roles.filter((function(e){return 1!==e.id})).map((function(e){return n.a.createElement("option",{key:e.id,value:e.id},e.title)})))),n.a.createElement(G.a,{variant:"secondary",type:"submit"},"Submit"))),n.a.createElement(H.a.Footer,null,n.a.createElement(G.a,{onClick:this.props.onHide,variant:"danger"},"Close")))}}]),a}(r.Component);var F=Object(o.b)((function(e){return{}}),(function(e){return{addUser:function(t){return e(function(e){return{type:"ADD_USER",payload:e}}(t))}}}))(q),J=function(e){Object(k.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(g.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={error:"",showModal:!1},e.onDelete=function(t){if(window.confirm("Are you sure to delete?")){var a=S.getCookie("token");C.destroy("/users/".concat(t),a).then((function(e){e&&e.error&&w(e.error)})).then((function(){e.fetchUsers(a)})).catch((function(e){return w(e)}))}},e.fetchUsers=function(t){C.get("/users",t).then((function(t){var a=t.data;a&&(a.sort((function(e,t){return e.id>t.id?-1:1})),e.props.storeUsers(a)),t.error&&e.setState((function(){return{error:w(t.error)}}))})).catch((function(t){return e.setState({error:w(t)})}))},e}return Object(j.a)(a,[{key:"componentDidMount",value:function(){this.props.storeUsers([]);var e=S.getCookie("token");this.fetchUsers(e)}},{key:"render",value:function(){var e=this,t=this.state.showModal,a=this.props.users;return n.a.createElement("div",{className:"container"},n.a.createElement(_,{message:this.state.error}),n.a.createElement("nav",{"aria-label":"breadcrumb",className:"dashboard__nav-bar"},n.a.createElement("ol",{className:"breadcrumb"},n.a.createElement("li",{className:"breadcrumb-item"},n.a.createElement(b.c,{to:"/",activeClassName:"active",exact:!0},"Home")),n.a.createElement("li",{className:"breadcrumb-item"},n.a.createElement(b.c,{to:"/users",activeClassName:"active"},"Users")))),n.a.createElement("div",{className:"dasboard__add-btn-wrapper"},n.a.createElement("button",{className:"dashboard__add-btn",onClick:function(){return e.setState((function(){return{showModal:!0}}))},title:"Add"},n.a.createElement("i",{className:"fas fa-plus-circle"}))),n.a.createElement(P.a,{responsive:!0,className:"dashboard__table"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"#"),n.a.createElement("th",null,"First Name"),n.a.createElement("th",null,"Last Name"),n.a.createElement("th",null,"Email"),n.a.createElement("th",null,"Role"),n.a.createElement("th",null,"Action"))),n.a.createElement("tbody",null,0===a.length&&n.a.createElement("tr",null,n.a.createElement("td",{colSpan:6},"No users present")),a.map((function(t){return n.a.createElement("tr",{key:t.id},n.a.createElement("td",null,t.id),n.a.createElement("td",null,t.firstname),n.a.createElement("td",null,t.lastname),n.a.createElement("td",null,t.email),n.a.createElement("td",null,t.role),n.a.createElement("td",null,n.a.createElement(b.b,{to:"/users/".concat(t.id),className:"dashboard__table-links",title:"View"},n.a.createElement("i",{className:"fas fa-eye"})),n.a.createElement(b.b,{to:"/users/".concat(t.id,"/edit"),className:"dashboard__table-links",title:"Edit"},n.a.createElement("i",{className:"fas fa-edit"})),n.a.createElement("span",{className:"dashboard__table-links",onClick:function(a){return e.onDelete(t.id)},title:"Delete"},n.a.createElement("i",{className:"fas fa-trash-alt"}))))})))),n.a.createElement(F,{show:t,onHide:function(){return e.setState((function(){return{showModal:!1}}))}}))}}]),a}(r.Component);var z=Object(o.b)((function(e){return{users:e.api.users}}),(function(e){return{storeUsers:function(t){return e(function(e){return{type:"STORE_USERS",payload:e}}(t))}}}))(O(J)),$=a(187),W=a(101),K=a.n(W),Y=function(e){Object(k.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(g.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={user:{},loading:!1,error:""},e}return Object(j.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=S.getCookie("token");C.get("/users/".concat(this.props.match.params.id),t).then((function(t){t.data&&e.setState((function(){return{user:t.data,error:""}})),t.error&&e.setState((function(){return{error:w(t.error)}}))})).catch((function(t){return e.setState((function(){return{error:w(t)}}))}))}},{key:"render",value:function(){return n.a.createElement("div",{className:"container"},n.a.createElement(_,{message:this.state.error}),n.a.createElement("nav",{"aria-label":"breadcrumb",className:"dashboard__nav-bar"},n.a.createElement("ol",{className:"breadcrumb"},n.a.createElement("li",{className:"breadcrumb-item"},n.a.createElement(b.c,{to:"/",activeClassName:"active",exact:!0},"Home")),n.a.createElement("li",{className:"breadcrumb-item"},n.a.createElement(b.c,{to:"/users",activeClassName:"active",exact:!0},"Users")),n.a.createElement("li",{className:"breadcrumb-item"},n.a.createElement(b.c,{to:"/users/".concat(this.state.user.id),activeClassName:"active"},"View User")))),n.a.createElement($.a,{style:{width:"18rem",margin:"15px auto"}},n.a.createElement($.a.Img,{variant:"top",src:K.a,style:{padding:"15px"}}),n.a.createElement($.a.Body,null,n.a.createElement($.a.Title,null,this.state.user.firstname+" "+this.state.user.lastname),n.a.createElement($.a.Text,null,"Email: ",this.state.user.email," ",n.a.createElement("br",null),"Role: ",this.state.user.roles&&this.state.user.roles[0].title),n.a.createElement(b.b,{to:"/users/".concat(this.state.user.id,"/edit"),className:"btn btn-success"},"Edit"))))}}]),a}(r.Component),Q=function(e){Object(k.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(g.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={error:"",loading:"",roles:[],user:{id:parseInt(e.props.match.params.id)},roleMenuValue:""},e.onSubmit=function(t){t.preventDefault();var a=S.getCookie("token"),r=t.target,n=document.getElementById("firstname").value,c=document.getElementById("lastname").value,s=document.getElementById("email").value,o=document.getElementById("role"),l=parseInt(o.value);C.put("/users/".concat(e.state.user.id),{firstname:n,lastname:c,email:s},a).then((function(t){var n=t.data;if(t.error){var c=w(t.error);e.setState((function(){return{error:c}}))}else C.post("/users/".concat(n.id,"/roles"),{roleIds:[l]},a).then((function(t){t.error||(r.reset(),e.props.history.goBack()),t.error&&e.setState((function(){return{error:w(t.error)}}))})).catch((function(t){e.setState((function(){return{error:w(t)}}))}))})).catch((function(t){return e.setState((function(){return{error:w(t)}}))}))},e.onRoleMenuChange=function(t){var a=t.target;e.setState((function(){return{roleMenuValue:a.value}}))},e.setErrorState=function(t,a){var r="";t.error&&(r=w(t.error)),a.error&&(r+=" "+w(a.error)),e.setState((function(){return{error:r}}))},e}return Object(j.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=S.getCookie("token"),a=parseInt(this.props.match.params.id);Promise.all([C.get("/roles",t),C.get("/users/".concat(a),t)]).then((function(t){var a=Object(T.a)(t,2),r=a[0],n=a[1];if(r.error||n.error)return e.setErrorState(r,n);var c=r.data,s=n.data,o=s.roles[0].id;c.sort((function(e,t){return e.title<=t.title?-1:1})),e.setState((function(){return{roles:c,user:s,error:"",roleMenuValue:o}}))})).catch((function(t){return e.setState((function(){return{error:w(t)}}))}))}},{key:"render",value:function(){return n.a.createElement("div",{className:"container"},n.a.createElement(_,{message:this.state.error}),n.a.createElement("nav",{"aria-label":"breadcrumb",className:"dashboard__nav-bar"},n.a.createElement("ol",{className:"breadcrumb"},n.a.createElement("li",{className:"breadcrumb-item"},n.a.createElement(b.c,{to:"/",activeClassName:"active",exact:!0},"Home")),n.a.createElement("li",{className:"breadcrumb-item"},n.a.createElement(b.c,{to:"/users",activeClassName:"active",exact:!0},"Users")),n.a.createElement("li",{className:"breadcrumb-item"},n.a.createElement(b.c,{to:"/users/".concat(this.state.user.id,"/edit"),activeClassName:"active"},"Edit User")))),n.a.createElement($.a,null,n.a.createElement($.a.Header,null,"Edit User"),n.a.createElement($.a.Body,null,n.a.createElement(V.a,{onSubmit:this.onSubmit,style:{backgroundColor:"white"}},n.a.createElement(V.a.Row,null,n.a.createElement(V.a.Group,{as:R.a,controlId:"firstname"},n.a.createElement(V.a.Label,null,"First Name"),n.a.createElement(V.a.Control,{required:!0,type:"text",placeholder:"Enter your First Name",defaultValue:this.state.user.firstname})),n.a.createElement(V.a.Group,{as:R.a,controlId:"lastname"},n.a.createElement(V.a.Label,null,"Last Name"),n.a.createElement(V.a.Control,{required:!0,type:"text",placeholder:"Enter your Last Name",defaultValue:this.state.user.lastname}))),n.a.createElement(V.a.Group,{controlId:"email"},n.a.createElement(V.a.Label,null,"Email address"),n.a.createElement(V.a.Control,{required:!0,type:"email",placeholder:"name@example.com",defaultValue:this.state.user.email})),n.a.createElement(V.a.Group,{as:R.a,controlId:"role"},n.a.createElement(V.a.Label,null,"Role"),n.a.createElement(V.a.Control,{required:!0,as:"select",value:this.state.roleMenuValue,onChange:this.onRoleMenuChange},n.a.createElement("option",{disabled:!0,value:""},"--Select Role--"),this.state.roles.filter((function(e){return 1!==e.id})).map((function(e){return n.a.createElement("option",{key:e.id,value:e.id},e.title)})))),n.a.createElement(G.a,{variant:"secondary",type:"submit"},"Submit")))))}}]),a}(r.Component),X=function(e){Object(k.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(g.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={error:"",managers:[]},e.registerProject=function(t){t.preventDefault();var a=S.getCookie("token"),r=t.target,n=document.getElementById("title").value,c=document.getElementById("description").value,s=document.getElementById("manager"),o=parseInt(s.value),l=s.options.item(s.selectedIndex).text;C.post("/projects",{title:n,description:c,manager_id:o},a).then((function(t){var a=t.data;if(t.error){var n=w(t.error);e.setState((function(){return{error:n}}))}else e.props.addProject(Object(u.a)({},a,{manager:l})),r.reset(),e.props.onHide()})).catch((function(t){return e.setState((function(){return{error:w(t)}}))}))},e}return Object(j.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=S.getCookie("token");C.get("/users/managers",t).then((function(t){t.data&&(t.data.sort((function(e,t){return e.firstname<=t.firstname?-1:1})),e.setState((function(){return{managers:t.data,error:""}}))),t.error&&e.setState((function(){return{error:w(t.error)}}))})).catch((function(t){return e.setState((function(){return{error:w(t)}}))}))}},{key:"render",value:function(){return n.a.createElement(H.a,Object.assign({},this.props,{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0}),n.a.createElement(H.a.Header,{closeButton:!0},n.a.createElement(H.a.Title,{id:"contained-modal-title-vcenter"},"Add Project")),n.a.createElement(H.a.Body,null,n.a.createElement(_,{message:this.state.error}),n.a.createElement(V.a,{onSubmit:this.registerProject},n.a.createElement(V.a.Group,{controlId:"title"},n.a.createElement(V.a.Label,null,"Title"),n.a.createElement(V.a.Control,{required:!0,type:"text",placeholder:"Enter Title"})),n.a.createElement(V.a.Group,{controlId:"description"},n.a.createElement(V.a.Label,null,"Description"),n.a.createElement(V.a.Control,{required:!0,as:"textarea"})),n.a.createElement(V.a.Group,{controlId:"manager"},n.a.createElement(V.a.Label,null,"Manager"),n.a.createElement(V.a.Control,{required:!0,as:"select",defaultValue:""},n.a.createElement("option",{disabled:!0,value:""},"--Select Manager--"),this.state.managers.map((function(e){return n.a.createElement("option",{key:e.id,value:e.id},e.firstname+" "+e.lastname)})))),n.a.createElement(G.a,{variant:"secondary",type:"submit"},"Submit"))),n.a.createElement(H.a.Footer,null,n.a.createElement(G.a,{onClick:this.props.onHide,variant:"danger"},"Close")))}}]),a}(r.Component);var Z=Object(o.b)((function(e){return{}}),(function(e){return{addProject:function(t){return e(function(e){return{type:"ADD_PROJECT",payload:e}}(t))}}}))(X),ee=1,te=2,ae=function(e){Object(k.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(g.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={error:"",showModal:!1},e.onDelete=function(t){if(window.confirm("Are you sure to delete?")){var a=S.getCookie("token");C.destroy("/projects/".concat(t),a).then((function(e){return e})).then((function(){return e.fetchProjects()})).catch((function(e){return w(e)}))}},e.fetchProjects=function(){var t=S.getCookie("token"),a=JSON.parse(S.getCookie("user")),r=a.roles[0].id===te||a.roles[0].id===ee?"/projects":"/users/".concat(a.id,"/projects");C.get(r,t).then((function(t){var a=t.data;a&&(a.sort((function(e,t){return e.id>t.id?-1:1})),e.props.storeProjects(a)),t.error&&e.setState((function(){return{error:w(t.error)}}))})).catch((function(t){return e.setState({error:w(t)})}))},e}return Object(j.a)(a,[{key:"componentDidMount",value:function(){this.props.storeProjects([]),this.fetchProjects()}},{key:"render",value:function(){var e=this,t=this.state.showModal,a=this.props.projects;return n.a.createElement("div",{className:"container"},n.a.createElement(_,{message:this.state.error}),n.a.createElement("nav",{"aria-label":"breadcrumb",className:"dashboard__nav-bar"},n.a.createElement("ol",{className:"breadcrumb"},n.a.createElement("li",{className:"breadcrumb-item"},n.a.createElement(b.c,{to:"/",activeClassName:"active",exact:!0},"Home")),n.a.createElement("li",{className:"breadcrumb-item"},n.a.createElement(b.c,{to:"/projects",activeClassName:"active"},"Projects")))),n.a.createElement("div",{className:"dasboard__add-btn-wrapper"},n.a.createElement("button",{className:"dashboard__add-btn",onClick:function(){return e.setState((function(){return{showModal:!0}}))},title:"Add"},n.a.createElement("i",{className:"fas fa-plus-circle"}))),n.a.createElement(P.a,{responsive:!0,className:"dashboard__table"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"#"),n.a.createElement("th",null,"Title"),n.a.createElement("th",null,"Manager"),n.a.createElement("th",null,"Action"))),n.a.createElement("tbody",null,0===a.length&&n.a.createElement("tr",null,n.a.createElement("td",{colSpan:4},"No projects present")),a.map((function(t){return n.a.createElement("tr",{key:t.id},n.a.createElement("td",null,t.id),n.a.createElement("td",null,t.title),n.a.createElement("td",null,t.manager),n.a.createElement("td",null,n.a.createElement(b.b,{to:"/projects/".concat(t.id),className:"dashboard__table-links",title:"View"},n.a.createElement("i",{className:"fas fa-eye"})),n.a.createElement(b.b,{to:"/projects/".concat(t.id,"/edit"),className:"dashboard__table-links",title:"Edit"},n.a.createElement("i",{className:"fas fa-edit"})),n.a.createElement("span",{className:"dashboard__table-links",onClick:function(a){return e.onDelete(t.id)},title:"Delete"},n.a.createElement("i",{className:"fas fa-trash-alt"}))))})))),n.a.createElement(Z,{show:t,onHide:function(){return e.setState((function(){return{showModal:!1}}))}}))}}]),a}(r.Component);var re=Object(o.b)((function(e){return{projects:e.api.projects}}),(function(e){return{storeProjects:function(t){return e(function(e){return{type:"STORE_PROJECTS",payload:e}}(t))}}}))(O(ae)),ne=a(63),ce=function(e){Object(k.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(g.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={error:"",loading:"",users:[],assignedUsers:[],loggedUserRoleId:0,managers:[],project:{id:parseInt(e.props.match.params.id)},managerMenuValue:""},e.assignUsers=function(t){if(t){var a=S.getCookie("token"),r=t.map((function(e){return parseInt(e.value)}));e.setState((function(){return{assignedUsers:t}})),C.post("/projects/".concat(e.state.project.id,"/users"),{userIds:r},a).then((function(){return e.setState((function(){return{error:""}}))})).catch((function(t){return e.setState((function(){return{error:w(t)}}))}))}},e.onSubmit=function(t){t.preventDefault();var a=S.getCookie("token"),r=JSON.parse(S.getCookie("user")),n=document.getElementById("title").value,c=document.getElementById("description").value,s=document.getElementById("manager"),o=parseInt(s&&s.value)||r.id;C.put("/projects/".concat(e.state.project.id),{title:n,description:c,manager_id:o},a).then((function(t){if(t.error){var a=w(t.error);e.setState((function(){return{error:a}}))}else e.props.history.goBack()})).catch((function(t){return e.setState((function(){return{error:w(t)}}))}))},e.onManagerMenuChange=function(t){var a=t.target;e.setState((function(){return{managerMenuValue:a.value}}))},e}return Object(j.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=S.getCookie("token"),a=JSON.parse(S.getCookie("user")),r=parseInt(this.props.match.params.id);this.setState((function(){return{loggedUserRoleId:a.roles[0].id}})),C.get("/projects/".concat(r),t).then((function(t){if(t.error)return e.setState((function(){return{error:w(t.error)}}));var a=t.data,r=a.manager_id;e.setState((function(){return{project:a,error:"",managerMenuValue:r}}))})).then((function(){a.roles[0].id!==te&&C.get("/users/managers",t).then((function(t){if(t.error)return e.setState((function(){return{error:w(t.error)}}));var a=t.data;a.sort((function(e,t){return e.title<=t.title?-1:1})),e.setState((function(){return{managers:a}}))}))})).catch((function(t){console.log(t),e.setState((function(){return{error:w(t)}}))})),C.get("/users/nonmanagers",t).then((function(t){if(t.error)e.setState((function(){return{error:w(t.error)}}));else{var a=t.data.map((function(e){return{value:e.id,label:"".concat(e.firstname," ").concat(e.lastname)}}));a.sort((function(e,t){return e.label<=t.label?-1:1})),e.setState((function(){return{users:a}}))}})).then((function(){C.get("/projects/".concat(r,"/users"),t).then((function(t){if(t.error)e.setState((function(){return{error:w(t.error)}}));else{var a=t.data.map((function(e){return{value:e.id,label:"".concat(e.firstname," ").concat(e.lastname)}}));e.setState((function(){return{assignedUsers:a}}))}}))})).catch((function(t){return e.setState((function(){return{error:w(t)}}))}))}},{key:"render",value:function(){return n.a.createElement("div",{className:"container"},n.a.createElement(_,{message:this.state.error}),n.a.createElement("nav",{"aria-label":"breadcrumb",className:"dashboard__nav-bar"},n.a.createElement("ol",{className:"breadcrumb"},n.a.createElement("li",{className:"breadcrumb-item"},n.a.createElement(b.c,{to:"/",activeClassName:"active",exact:!0},"Home")),n.a.createElement("li",{className:"breadcrumb-item"},n.a.createElement(b.c,{to:"/projects",activeClassName:"active",exact:!0},"Projects")),n.a.createElement("li",{className:"breadcrumb-item"},n.a.createElement(b.c,{to:"/projects/".concat(this.state.project.id,"/edit"),activeClassName:"active"},"Edit Project")))),n.a.createElement($.a,null,n.a.createElement($.a.Header,null,"Edit Project"),n.a.createElement($.a.Body,null,n.a.createElement(V.a,{onSubmit:this.onSubmit,style:{backgroundColor:"white"}},n.a.createElement(V.a.Group,{controlId:"title"},n.a.createElement(V.a.Label,null,"Title"),n.a.createElement(V.a.Control,{required:!0,type:"text",placeholder:"Enter Title",defaultValue:this.state.project.title})),n.a.createElement(V.a.Group,{controlId:"description"},n.a.createElement(V.a.Label,null,"Description"),n.a.createElement(V.a.Control,{required:!0,as:"textarea",defaultValue:this.state.project.description})),this.state.loggedUserRoleId!==te&&n.a.createElement(V.a.Group,{controlId:"manager"},n.a.createElement(V.a.Label,null,"Manager"),n.a.createElement(V.a.Control,{required:!0,as:"select",value:this.state.managerMenuValue,onChange:this.onManagerMenuChange},n.a.createElement("option",{disabled:!0,value:""},"--Select Manager--"),this.state.managers.map((function(e){return n.a.createElement("option",{key:e.id,value:e.id},e.firstname+" "+e.lastname)})))),n.a.createElement(G.a,{variant:"secondary",type:"submit"},"Submit")))),n.a.createElement($.a,null,n.a.createElement($.a.Header,null,"Assign Users to the Project"),n.a.createElement($.a.Body,null,n.a.createElement(ne.a,{options:this.state.users,isMulti:!0,autoFocus:!0,isSearchable:!0,onChange:this.assignUsers,value:this.state.assignedUsers}))))}}]),a}(r.Component),se=a(58),oe=a.n(se),le=(a(88),function(e){Object(k.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(g.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={error:"",selectedDate:new Date},e.registerTask=function(t){t.preventDefault();var a=S.getCookie("token"),r=document.getElementById("title").value,n=document.getElementById("description").value,c=document.getElementById("deadline").value.replace(/(\d\d)\/(\d\d)\/(\d{4})/,"$3-$1-$2"),s=document.getElementById("assignee"),o=s.value,l={title:r,description:n,deadline:c,project_id:e.props.projectId};o&&(l.assignee_id=parseInt(o)),C.post("/tasks",l,a).then((function(t){var a=t.data;if(t.error){var r=w(t.error);e.setState((function(){return{error:r}}))}else o?e.props.addTask(Object(u.a)({},a,{assignee:s.options.item(s.selectedIndex).text})):e.props.addTask(a),e.props.onHide()})).catch((function(t){return e.setState((function(){return{error:w(t)}}))}))},e.handleChange=function(t){e.setState((function(){return{selectedDate:t}}))},e}return Object(j.a)(a,[{key:"render",value:function(){return n.a.createElement(H.a,Object.assign({},this.props,{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0}),n.a.createElement(H.a.Header,{closeButton:!0},n.a.createElement(H.a.Title,{id:"contained-modal-title-vcenter"},"Add Task")),n.a.createElement(H.a.Body,null,n.a.createElement(_,{message:this.state.error}),n.a.createElement(V.a,{onSubmit:this.registerTask},n.a.createElement(V.a.Group,{controlId:"title"},n.a.createElement(V.a.Label,null,"Title"),n.a.createElement(V.a.Control,{required:!0,type:"text",placeholder:"Enter Title"})),n.a.createElement(V.a.Group,{controlId:"description"},n.a.createElement(V.a.Label,null,"Description"),n.a.createElement(V.a.Control,{required:!0,as:"textarea"})),n.a.createElement(V.a.Group,null,n.a.createElement(V.a.Label,null,"Deadline: \xa0"),n.a.createElement(oe.a,{selected:this.state.selectedDate,onChange:this.handleChange,id:"deadline",className:"form-control"})),n.a.createElement(V.a.Group,{controlId:"assignee"},n.a.createElement(V.a.Label,null,"Assingee"),n.a.createElement(V.a.Control,{as:"select",defaultValue:""},n.a.createElement("option",{disabled:!0,value:""},"--Select Assignee--"),this.props.assignedUsers.map((function(e){return n.a.createElement("option",{key:e.value,value:e.value},e.label)})))),n.a.createElement(G.a,{variant:"secondary",type:"submit"},"Submit"))),n.a.createElement(H.a.Footer,null,n.a.createElement(G.a,{onClick:this.props.onHide,variant:"danger"},"Close")))}}]),a}(r.Component)),ie=function(e){Object(k.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(g.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={project:{tasks:[]},assignedUsers:[],loading:!1,error:"",showModal:!1},e.addTask=function(t){e.setState((function(){return{project:{tasks:[t].concat(Object(i.a)(e.state.project.tasks))}}}))},e.onDelete=function(t){if(window.confirm("Are you sure to delete?")){var a=S.getCookie("token");C.destroy("/tasks/".concat(t),a).then((function(e){e&&e.error&&w(e.error)})).then((function(){return e.fetchTasks(a)})).catch((function(e){return w(e)}))}},e.fetchTasks=function(t){C.get("/projects/".concat(e.props.match.params.id),t).then((function(t){t.data&&(t.data.tasks.sort((function(e,t){return e.id<t.id?1:-1})),e.setState((function(){return{project:t.data,error:""}}))),t.error&&e.setState((function(){return{error:w(t.error)}}))})).catch((function(t){return e.setState((function(){return{error:w(t)}}))}))},e}return Object(j.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=S.getCookie("token");this.fetchTasks(t),C.get("/projects/".concat(this.props.match.params.id,"/users"),t).then((function(t){if(t.data){var a=t.data.map((function(e){return{value:e.id,label:e.firstname+" "+e.lastname}}));e.setState((function(){return{assignedUsers:a}}))}else e.setState((function(){return{error:w(t.error)}}))}))}},{key:"render",value:function(){var e=this,t=this.state.project.tasks,a=this.state.showModal;return n.a.createElement("div",{className:"container"},n.a.createElement(_,{message:this.state.error}),n.a.createElement("nav",{"aria-label":"breadcrumb",className:"dashboard__nav-bar"},n.a.createElement("ol",{className:"breadcrumb"},n.a.createElement("li",{className:"breadcrumb-item"},n.a.createElement(b.c,{to:"/",activeClassName:"active",exact:!0},"Home")),n.a.createElement("li",{className:"breadcrumb-item"},n.a.createElement(b.c,{to:"/projects",activeClassName:"active",exact:!0},"Projects")),n.a.createElement("li",{className:"breadcrumb-item"},n.a.createElement(b.c,{to:"/projects/".concat(this.state.project.id),activeClassName:"active"},"View Project")))),n.a.createElement($.a,null,n.a.createElement($.a.Header,null,this.state.project.title),n.a.createElement($.a.Body,null,n.a.createElement($.a.Title,null,"Description"),n.a.createElement($.a.Text,null,this.state.project.description),n.a.createElement($.a.Title,null,"Manager"),n.a.createElement($.a.Text,null,this.state.project.manager&&this.state.project.manager.firstname+" "+this.state.project.manager.lastname),n.a.createElement($.a.Title,null,"Assigned Users"),n.a.createElement($.a.Text,null,n.a.createElement(ne.a,{options:this.state.assignedUsers,isMulti:!0,autoFocus:!0,isSearchable:!0,value:this.state.assignedUsers})))),n.a.createElement($.a,null,n.a.createElement($.a.Header,null,"Tasks"),n.a.createElement($.a.Body,null,n.a.createElement("div",{className:"dasboard__add-btn-wrapper"},n.a.createElement("button",{className:"dashboard__add-btn",onClick:function(){return e.setState((function(){return{showModal:!0}}))},title:"Add"},n.a.createElement("i",{className:"fas fa-plus-circle"}))),n.a.createElement(P.a,{responsive:!0,className:"dashboard__table"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"#"),n.a.createElement("th",null,"Title"),n.a.createElement("th",null,"Deadline"),n.a.createElement("th",null,"Assignee"),n.a.createElement("th",null,"Action"))),n.a.createElement("tbody",null,0===t.length&&n.a.createElement("tr",null,n.a.createElement("td",{colSpan:5},"No tasks present")),t.map((function(t){return n.a.createElement("tr",{key:t.id},n.a.createElement("td",null,t.id),n.a.createElement("td",null,t.title),n.a.createElement("td",null,new Date(t.deadline).toLocaleDateString()),n.a.createElement("td",null,t.assignee),n.a.createElement("td",null,n.a.createElement(b.b,{to:"/projects/".concat(e.state.project.id,"/tasks/").concat(t.id),className:"dashboard__table-links",title:"View"},n.a.createElement("i",{className:"fas fa-eye"})),n.a.createElement(b.b,{to:"/projects/".concat(e.state.project.id,"/tasks/").concat(t.id,"/edit"),className:"dashboard__table-links",title:"Edit"},n.a.createElement("i",{className:"fas fa-edit"})),n.a.createElement("span",{className:"dashboard__table-links",onClick:function(a){return e.onDelete(t.id)},title:"Delete"},n.a.createElement("i",{className:"fas fa-trash-alt"}))))})))),n.a.createElement(le,{projectId:this.state.project.id,assignedUsers:this.state.assignedUsers,show:a,addTask:this.addTask,onHide:function(){return e.setState((function(){return{showModal:!1}}))}}))))}}]),a}(r.Component),ue=function(e){Object(k.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(g.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={error:"",selectedDate:new Date},e.registerComment=function(t){t.preventDefault();var a=S.getCookie("token"),r={text:document.getElementById("text").value,commenter_id:e.props.commenterId,task_id:e.props.taskId};C.post("/comments",r,a).then((function(t){var a=t.data;if(t.error){var r=w(t.error);e.setState((function(){return{error:r}}))}else e.props.addComment(a),e.props.onHide()})).catch((function(t){return e.setState((function(){return{error:w(t)}}))}))},e}return Object(j.a)(a,[{key:"render",value:function(){return n.a.createElement(H.a,Object.assign({},this.props,{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0}),n.a.createElement(H.a.Header,{closeButton:!0},n.a.createElement(H.a.Title,{id:"contained-modal-title-vcenter"},"Add Comment")),n.a.createElement(H.a.Body,null,n.a.createElement(_,{message:this.state.error}),n.a.createElement(V.a,{onSubmit:this.registerComment},n.a.createElement(V.a.Group,{controlId:"text"},n.a.createElement(V.a.Label,null,"Comment Text"),n.a.createElement(V.a.Control,{required:!0,as:"textarea"})),n.a.createElement(G.a,{variant:"secondary",type:"submit"},"Submit"))),n.a.createElement(H.a.Footer,null,n.a.createElement(G.a,{onClick:this.props.onHide,variant:"danger"},"Close")))}}]),a}(r.Component),me=function(e){Object(k.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(g.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={task:{},comments:[],loading:!1,error:"",showModal:!1},e.addComment=function(t){var a=JSON.parse(S.getCookie("user"));t.commenter=a.firstname+" "+a.lastname,e.setState((function(){return{comments:[t].concat(Object(i.a)(e.state.comments))}}))},e.onDelete=function(e){if(window.confirm("Are you sure to delete?")){var t=S.getCookie("token");C.destroy("/comments/".concat(e),t).then((function(e){e&&e.error&&w(e.error)})).catch((function(e){return w(e)}))}},e}return Object(j.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=S.getCookie("token");C.get("/tasks/".concat(this.props.match.params.id),t).then((function(t){t.data&&e.setState((function(){return{task:t.data,error:""}})),t.error&&e.setState((function(){return{error:w(t.error)}}))})).catch((function(t){return e.setState((function(){return{error:w(t)}}))})),C.get("/tasks/".concat(this.props.match.params.id,"/comments"),t).then((function(t){if(t.data){var a=t.data;e.setState((function(){return{comments:a}}))}else e.setState((function(){return{error:w(t.error)}}))}))}},{key:"render",value:function(){var e=this,t=JSON.parse(S.getCookie("user"));return n.a.createElement("div",{className:"container"},n.a.createElement(_,{message:this.state.error}),n.a.createElement("nav",{"aria-label":"breadcrumb",className:"dashboard__nav-bar"},n.a.createElement("ol",{className:"breadcrumb"},n.a.createElement("li",{className:"breadcrumb-item"},n.a.createElement(b.c,{to:"/",activeClassName:"active",exact:!0},"Home")),n.a.createElement("li",{className:"breadcrumb-item"},n.a.createElement(b.c,{to:"/projects",activeClassName:"active",exact:!0},"Projects")),n.a.createElement("li",{className:"breadcrumb-item"},n.a.createElement(b.c,{to:"/projects/".concat(this.props.match.params.projectId),activeClassName:"active",exact:!0},"View Project")),n.a.createElement("li",{className:"breadcrumb-item"},n.a.createElement(b.c,{to:"/projects/".concat(this.props.match.params.projectId,"/tasks/").concat(this.state.task.id),activeClassName:"active"},"View Task")))),n.a.createElement($.a,null,n.a.createElement($.a.Header,null,this.state.task.title),n.a.createElement($.a.Body,null,n.a.createElement($.a.Title,null,"Description"),n.a.createElement($.a.Text,null,this.state.task.description),n.a.createElement($.a.Title,null,"Deadline"),n.a.createElement($.a.Text,null,this.state.task.deadline&&new Date(this.state.task.deadline).toLocaleDateString()),n.a.createElement($.a.Title,null,"Assignee"),n.a.createElement($.a.Text,null,this.state.task.assignee?this.state.task.assignee.firstname+" "+this.state.task.assignee.lastname:"Not Available"))),n.a.createElement($.a,null,n.a.createElement($.a.Header,null,"Comments"),n.a.createElement($.a.Body,null,n.a.createElement("div",{className:"dasboard__add-btn-wrapper"},n.a.createElement("button",{className:"dashboard__add-btn",onClick:function(){return e.setState((function(){return{showModal:!0}}))},title:"Add"},n.a.createElement("i",{className:"fas fa-plus-circle"}))),this.state.comments.map((function(t){return n.a.createElement($.a,{key:t.id},n.a.createElement($.a.Header,null,t.commenter," \xa0 ",new Date(t.created_at).toLocaleString()," ",n.a.createElement("span",{className:"dashboard__table-links",onClick:function(a){return e.onDelete(t.id)},title:"Delete"},n.a.createElement("i",{className:"fas fa-trash-alt"}))),n.a.createElement($.a.Body,null,t.text))})),n.a.createElement(ue,{show:this.state.showModal,commenterId:t.id,taskId:this.state.task.id,addComment:this.addComment,onHide:function(){return e.setState((function(){return{showModal:!1}}))}}))))}}]),a}(r.Component),de=function(e){Object(k.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(g.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={error:"",loading:"",selectedDate:new Date,assignedUsers:[],task:{id:parseInt(e.props.match.params.id)},assigneeMenuValue:""},e.assignUsers=function(t){if(t){var a=S.getCookie("token"),r=t.map((function(e){return parseInt(e.value)}));e.setState((function(){return{assignedUsers:t}})),C.post("/tasks/".concat(e.state.task.id,"/users"),{userIds:r},a).then((function(){return e.setState((function(){return{error:""}}))})).catch((function(t){return e.setState((function(){return{error:w(t)}}))}))}},e.handleChange=function(t){e.setState((function(){return{selectedDate:t}}))},e.onSubmit=function(t){t.preventDefault();var a=S.getCookie("token"),r=document.getElementById("title").value,n=document.getElementById("description").value,c=document.getElementById("deadline").value.replace(/(\d\d)\/(\d\d)\/(\d{4})/,"$3-$1-$2"),s=document.getElementById("assignee").value,o={title:r,description:n,deadline:c,project_id:e.props.match.params.projectId};s&&(o.assignee_id=parseInt(s)),e.state.task.assignee_id&&(o.previous_assignee_id=e.state.task.assignee_id),C.put("/tasks/".concat(e.state.task.id),o,a).then((function(t){if(t.error){var a=w(t.error);e.setState((function(){return{error:a}}))}else e.props.history.goBack()})).catch((function(t){return e.setState((function(){return{error:w(t)}}))}))},e.onAssigneeMenuChange=function(t){var a=t.target;e.setState((function(){return{assigneeMenuValue:a.value}}))},e}return Object(j.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=S.getCookie("token"),a=parseInt(this.props.match.params.id),r=parseInt(this.props.match.params.projectId);C.get("/tasks/".concat(a),t).then((function(t){if(t.error)return e.setState((function(){return{error:w(t.error)}}));var a=t.data;a.assignee_id&&e.setState((function(){return{assigneeMenuValue:a.assignee_id}})),e.setState((function(){return{task:a,error:"",selectedDate:new Date(a.deadline)}}))})).catch((function(t){e.setState((function(){return{error:w(t)}}))})),C.get("/projects/".concat(r,"/users"),t).then((function(t){if(t.error)e.setState((function(){return{error:w(t.error)}}));else{var a=t.data;a.sort((function(e,t){return e.label<=t.label?-1:1})),e.setState((function(){return{assignedUsers:a}}))}})).catch((function(t){return e.setState((function(){return{error:w(t)}}))}))}},{key:"render",value:function(){return n.a.createElement("div",{className:"container"},n.a.createElement(_,{message:this.state.error}),n.a.createElement("nav",{"aria-label":"breadcrumb",className:"dashboard__nav-bar"},n.a.createElement("ol",{className:"breadcrumb"},n.a.createElement("li",{className:"breadcrumb-item"},n.a.createElement(b.c,{to:"/",activeClassName:"active",exact:!0},"Home")),n.a.createElement("li",{className:"breadcrumb-item"},n.a.createElement(b.c,{to:"/projects",activeClassName:"active",exact:!0},"Projects")),n.a.createElement("li",{className:"breadcrumb-item"},n.a.createElement(b.c,{to:"/projects/".concat(this.props.match.params.projectId),activeClassName:"active",exact:!0},"View Project")),n.a.createElement("li",{className:"breadcrumb-item"},n.a.createElement(b.c,{to:"/projects/".concat(this.props.match.params.projectId,"/tasks/").concat(this.state.task.id,"/edit"),activeClassName:"active"},"Edit Task")))),n.a.createElement($.a,null,n.a.createElement($.a.Header,null,"Edit Task"),n.a.createElement($.a.Body,null,n.a.createElement(V.a,{onSubmit:this.onSubmit,style:{backgroundColor:"white"}},n.a.createElement(V.a.Group,{controlId:"title"},n.a.createElement(V.a.Label,null,"Title"),n.a.createElement(V.a.Control,{required:!0,type:"text",placeholder:"Enter Title",defaultValue:this.state.task.title})),n.a.createElement(V.a.Group,{controlId:"description"},n.a.createElement(V.a.Label,null,"Description"),n.a.createElement(V.a.Control,{required:!0,as:"textarea",defaultValue:this.state.task.description})),n.a.createElement(V.a.Group,null,n.a.createElement(V.a.Label,null,"Deadline: \xa0"),n.a.createElement(oe.a,{selected:this.state.selectedDate,onChange:this.handleChange,id:"deadline",className:"form-control"})),n.a.createElement(V.a.Group,{controlId:"assignee"},n.a.createElement(V.a.Label,null,"Assingee"),n.a.createElement(V.a.Control,{as:"select",value:this.state.assigneeMenuValue,onChange:this.onAssigneeMenuChange},n.a.createElement("option",{disabled:!0,value:""},"--Select Assignee--"),this.state.assignedUsers&&this.state.assignedUsers.map((function(e){return n.a.createElement("option",{key:e.id,value:e.id},e.firstname+" "+e.lastname)})))),n.a.createElement(G.a,{variant:"secondary",type:"submit"},"Submit")))))}}]),a}(r.Component),pe=function(){return n.a.createElement("div",null,"404 Not Found")},Ee=function(){return n.a.createElement(b.a,{basename:"/leapfrog/pms/"},n.a.createElement("div",null,n.a.createElement(v.c,null,n.a.createElement(v.a,{path:"/",component:L(D),exact:!0}),n.a.createElement(v.a,{path:"/login",component:M}),n.a.createElement(v.a,{path:"/users",component:L(z),exact:!0}),n.a.createElement(v.a,{path:"/users/:id",component:L(Y),exact:!0}),n.a.createElement(v.a,{path:"/users/:id/edit",component:L(Q)}),n.a.createElement(v.a,{path:"/projects",component:L(re),exact:!0}),n.a.createElement(v.a,{path:"/projects/:id",component:L(ie),exact:!0}),n.a.createElement(v.a,{path:"/projects/:id/edit",component:L(ce)}),n.a.createElement(v.a,{path:"/projects/:projectId/tasks/:id",component:L(me),exact:!0}),n.a.createElement(v.a,{path:"/projects/:projectId/tasks/:id/edit",component:L(de),exact:!0}),n.a.createElement(v.a,{component:L(pe)}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(o.a,{store:h},n.a.createElement(Ee,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[105,1,2]]]);
//# sourceMappingURL=main.056f1a86.chunk.js.map